<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>收货地址管理</title>
    <link rel="stylesheet" type="text/css" href="css/eui.css" />
</head>
<body>
<div class="content">
    <header class="header bg_info">
        <div class="arrow_left" onclick="location.href='index.html'"></div>收货地址管理
    </header>
    <!-- 地址列表 -->
    <div class="address_list list"></div>
    <form class="edit_address list fixed all bg_white hide" style="z-index:10"></div>
</div>
<!-- 地址模版 -->
<script type="text/template" charset="utf-8" id='list_template'>
    {{for(var i=0;i<it.length;i++){ }}
    <div class="list_item flex_center">
        <label class="width_30" onclick="setdefault({{=i}})">
            <input type="radio" name="address" class="radio" {{if(it[i].default=="1"){}}checked{{}}}>
        </label>
        <div class="left_100">
            <div class="label_span contact">{{=it[i].realname}}({{=it[i].mobile}})</div>
            <div class="label_span address">{{=it[i].province}}{{=it[i].city}}{{=it[i].area}}{{=it[i].address}}</div>
        </div>
        <div class="width_30 text_center" onclick="address({{=i}})">
            <i class="icon icon_edit"></i>
        </div>
        <div class="width_30 text_center" onclick="del({{=i}})">
            <i class="icon icon_close"></i>
        </div>
    </div>
    {{ } }}
    <div class="list_item" onclick="address()">
        <i class="icon icon_plus" style="color: #000;font-weight: bold;"></i>新增收货地址
    </div>
</script>
<!-- 编辑地址浮层 -->
<script type="text/template" charset="utf-8" id='edit_template'>
    <input type="hidden" name="id" value="{{=it.id||''}}"/>
    <input type="hidden" name="default" value="{{=it.default||'0'}}"/>
    <div class="list_item flex">
        <div class="width_70">姓名</div>
        <input class="left_70" type="text" name="realname" value="{{=it.realname||''}}" placeholder="请输入您的姓名" request title="您的姓名">
    </div>
    <div class="list_item flex">
        <div class="width_70">手机号</div>
        <input class="left_70" type="text" name="mobile" value="{{=it.mobile||''}}" placeholder="请输入您的手机号" request data-pattern="^(0|86|17951)?(13\d|15[0-35-9]|17[678]|18\d|14[57])\d{8}$" title="您的手机号" data-tips="正确格式的手机号">
    </div>
    <div class="list_item flex">
        <div class="width_70">省</div>
        <select class="left_70 select1" name="province"></select>
    </div>
    <div class="list_item flex">
        <div class="width_70">市</div>
        <select class="left_70 select2" name="city"></select>
    </div>
    <div class="list_item flex">
        <div class="width_70">区</div>
        <select class="left_70 select3" name="area"></select>
    </div>
    <div class="list_item flex">
        <div class="width_70">详细地址</div>
        <input class="left_70" type="text" name="address" value="{{=it.address||''}}" placeholder="请输入您的详细地址" request title="您的详细地址"></select>
    </div>
    <div class="padding_15">
        <button class="all_width btn_block btn_danger">确认</button>
        <div class="btn_block btn_grey" style="margin-top:10px;" onclick="quit()">取消</div>
    </div>
</script>
<!-- 城市模版 -->
<script type="text/template" charset="utf-8" id='city_template'>
    {{for (var i in it.data){ }}
        <option value="{{=i}}"{{ if(it.val==i){ }}selected{{ } }}>{{=it.data[i]}}</option>
    {{ } }}
</script>
<script language="javascript" src="js/jquery.min.js"></script>
<script language="javascript" src="js/doT.min.js"></script>
<script language="javascript" src="js/area.json"></script>
<script language="javascript" src="js/func.js"></script>
<script language="javascript" src="js/base.js"></script>
<script type="text/javascript">
    // 地址模版
        var address_list = [{id:"1",province:"陕西省",city:"西安市",area:"未央区",address:"凤城五路这儿",realname:"elena",mobile:"13325481173",default:"0"},{id:"2",province:"陕西省",city:"西安市",area:"长安区",address:"凤城五路这儿",realname:"xx",mobile:"13325481173",default:"1"}];
        var editno = "";
        var evaladdress = doT.template($("#list_template").text());
        var evaledit = doT.template($("#edit_template").text());
        var evalcity = doT.template($("#city_template").text());
        loaddata(".address_list",evaladdress,address_list);
    // 设为默认
        function setdefault(n){
            for(var i=0;i<address_list.length;i++){
                if(i == n){
                    address_list[i].default = 1;
                }else{
                    address_list[i].default = 0;
                }
            }
            loaddata(".address_list",evaladdress,address_list);
            // ajax
        }
    // 删除地址
        function del(i){
            //提示确认
            if(confirm("真的要删除吗？")){
                address_list.splice(i,1);
                loaddata(".address_list",evaladdress,address_list);
                // ajax
            }
        }
</script>   